@page "/recommendations/movie"

<div id="recommendations-movie">
    <h1>Movie Recommendations</h1>
    <hr />
    <div class="card mb-3">
        <div class="card-body">
            <div class="row">
                <div class="col-md-2">
                    <SortingSelect OnSortSelection="HandleSortSelection" />
                </div>
                <div class="col-md-2">
                    <GenreSelect OnGenreSelection="HandleGenreSelection" />
                </div>
                <div class="col-md-2">
                    <ReleaseYearSelect OnYearSelection="HandleYearSelection" StartReleaseYear="1900" YearCount="129" />
                </div>
            </div>
            <div class="row">
                <div class="col-md-2">
                    <button class="btn btn-primary btn-sm" @onclick="HandleButtonClick">Recommend</button>
                </div>
            </div>
        </div>
    </div>
    @if (Results.Count() is not 0)
    {
        <table class="table table-bordered">
            <thead class="table-dark">
                <tr>
                    <th scope="col">Title</th>
                    <th scope="col">Release Date</th>
                    <th scope="col">Rating</th>
                    <th scope="col">Popularity</th>
                    <th scope="col">Details</th>
                </tr>
            </thead>
            @foreach (var movie in Results)
            {
                <tbody>
                    <tr>
                        <td>@movie.Title</td>
                        <td>@(!string.IsNullOrWhiteSpace(movie.Release_Date) ? movie.Release_Date : DateTime.MinValue.ToShortDateString())</td>
                        <td>@movie.Vote_Average</td>
                        <td>@(Math.Round(movie.Popularity, 2))</td>
                        <td>
                            <a href="@($"/movie/{movie.Id}")">Details</a>
                        </td>
                    </tr>
                </tbody>
            }
        </table>
    }
    <Pagination Page="@Page" TotalPages="@TotalPages" OnPageChanged="HandlePageChanged" />
</div> 